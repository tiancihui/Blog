<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Pisces',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":true},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":true,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Dunwu&#39;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Dunwu">
<meta property="og:url" content="https://dunwu.github.io/blog/page/8/index.html">
<meta property="og:site_name" content="Dunwu">
<meta property="og:description" content="Dunwu&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zhang Peng">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://dunwu.github.io/blog/page/8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Dunwu</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/blog/atom.xml" title="Dunwu" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Dunwu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">大道至简，知易行难</h1>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">50</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">14</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">79</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/dunwu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/design/pattern/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/design/pattern/README/" class="post-title-link" itemprop="url">设计模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-01-27 16:50:00" itemprop="dateCreated datePublished" datetime="2015-01-27T16:50:00+08:00">2015-01-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 15:46:26" itemprop="dateModified" datetime="2020-07-25T15:46:26+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/design/pattern/README/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="design/pattern/README/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式"><a class="markdownIt-Anchor" href="#设计模式"></a> 设计模式</h1>
<p>设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。</p>
<h2 id="创建型模式"><a class="markdownIt-Anchor" href="#创建型模式"></a> 创建型模式</h2>
<h3 id="创建型模式简介"><a class="markdownIt-Anchor" href="#创建型模式简介"></a> 创建型模式简介</h3>
<p><strong>创建型模式</strong>抽象了<strong>实例化</strong>的过程。它将<strong>系统</strong>与它的<strong>对象</strong>创建、结合、表示的方式<strong>分离</strong>。</p>
<p>创建型模式都会将关于该系统使用哪些具体的类的信息<strong>封装</strong>起来。</p>
<p>在软件工程中，创建型模式是处理对象创建的设计模式，试图根据实际情况使用合适的方式创建对象。</p>
<p>基本的对象创建方式可能会导致设计上的问题，或增加设计的复杂度。创建型模式通过以某种方式控制对象的创建来解决问题。</p>
<p>创建型模式的<strong>指导思想</strong>是：</p>
<ul>
<li>将系统使用的具体类封装起来。</li>
<li>隐藏这些具体类的实例创建和结合的方式。</li>
</ul>
<p>创建型模式又分为<strong>对象创建型模式</strong>和<strong>类创建型模式</strong>。对象创建型模式处理对象的创建，类创建型模式处理类的创建。</p>
<ul>
<li><strong>对象创建型模式</strong>把对象创建的一部分推迟到另一个对象中。（代表模式：<strong>单例模式</strong>、<strong>建造者模式</strong>、<strong>原型模式</strong>、<strong>抽象工厂模式</strong>）</li>
<li><strong>类创建型模式</strong>将它对象的创建推迟到子类中。（代表模式：<strong>工厂方法模式</strong>）</li>
</ul>
<h3 id="创建型模式应用"><a class="markdownIt-Anchor" href="#创建型模式应用"></a> 创建型模式应用</h3>
<p>现代软件工程更加依赖对象的组合，而不是类的继承，强调从硬编码的行为转变到定义一组基本行为来组合成复杂的行为。</p>
<p>硬编码的行为不够灵活，因为如果想要改变设计的一部分，需要通过重写或者重新实现才能完成。</p>
<p>另外，硬编码没有提高重用性，而且难以跟踪错误。由于这些原因，创建型模式比硬编码的行为更有用。</p>
<p>创建型模式使设计变得更灵活，提供了不同的方式，从代码中移除了对需要实例化的具体类的引用。换句话说，这些模式增强了对象和类之间的独立性。</p>
<p>在以下情况中，可以考虑应用创建型模式：</p>
<ul>
<li>一个系统需要和它的对象和产品的创建相互独立。</li>
<li>一组相关的对象被设计为一起使用。</li>
<li>隐藏一个类库的具体实现，仅暴露它们的接口。</li>
<li>创建独立复杂对象的不同表示。</li>
<li>一个类希望它的子类实现它所创建的对象。</li>
<li>类的实例化在运行时才指定。</li>
<li>一个类只能有一个实例，而且这个实例能在任何时候访问到。</li>
<li>实例应该能在不修改的情况下具有可扩展性。</li>
</ul>
<h3 id="创建型模式代表"><a class="markdownIt-Anchor" href="#创建型模式代表"></a> 创建型模式代表</h3>
<ul>
<li><a href="%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.md">单例模式 (Singleton Pattern)</a></li>
<li><a href="%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.md">简单工厂模式 (Simple Factory Pattern)</a></li>
<li><a href="%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F.md">工厂方法模式 (Factory Method Pattern)</a></li>
<li><a href="%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.md">抽象工厂模式 (Abstract Factory Pattern)</a></li>
<li><a href="%E6%9E%84%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F.md">构造者模式 (Builder Pattern)</a></li>
<li><a href="%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F.md">原型模式 (Prototype Pattern)</a></li>
</ul>
<h2 id="结构型模式"><a class="markdownIt-Anchor" href="#结构型模式"></a> 结构型模式</h2>
<ul>
<li><a href="%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F.md">适配器模式 (Adapter Pattern)</a></li>
<li><a href="%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F.md">桥接模式 (Bridge Pattern)</a></li>
<li><a href="%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F.md">装饰者模式 (Decorator Pattern)</a></li>
<li><a href="%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F.md">组合模式 (Composite Pattern)</a></li>
<li><a href="%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F.md">外观模式 (Facade Pattern)</a></li>
<li><a href="%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F.md">享元模式 (Flyweight Pattern)</a></li>
<li><a href="%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.md">代理模式 (Proxy Pattern)</a></li>
</ul>
<h2 id="行为型模式"><a class="markdownIt-Anchor" href="#行为型模式"></a> 行为型模式</h2>
<ul>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4203714.html" target="_blank" rel="noopener">模板方法模式 (Template Method Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4234281.html" target="_blank" rel="noopener">命令模式 (Command Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4236056.html" target="_blank" rel="noopener">迭代器模式 (Iterator Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4236338.html" target="_blank" rel="noopener">观察者模式 (Observer Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4236961.html" target="_blank" rel="noopener">解释器模式 (Interpreter Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4238479.html" target="_blank" rel="noopener">中介者模式 (Mediator Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4241496.html" target="_blank" rel="noopener">职责链模式 (Chain of Responsibility Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4241659.html" target="_blank" rel="noopener">备忘录模式 (Memento Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4241965.html" target="_blank" rel="noopener">策略模式 (Strategy Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4242418.html" target="_blank" rel="noopener">访问者模式 (Visitor Pattern)</a></li>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/4243478.html" target="_blank" rel="noopener">状态模式 (State Pattern)</a></li>
</ul>
<h2 id="资料"><a class="markdownIt-Anchor" href="#资料"></a> 资料</h2>
<ul>
<li><a href="https://item.jd.com/10100236.html" target="_blank" rel="noopener">O’Reilly：Head First 设计模式</a></li>
<li><a href="https://item.jd.com/10079261.html" target="_blank" rel="noopener">大话设计模式</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/design/pattern/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/design/pattern/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式之外观模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-01-19 15:15:00" itemprop="dateCreated datePublished" datetime="2015-01-19T15:15:00+08:00">2015-01-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 15:46:26" itemprop="dateModified" datetime="2020-07-25T15:46:26+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/design/pattern/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="design/pattern/外观模式/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式之外观模式"><a class="markdownIt-Anchor" href="#设计模式之外观模式"></a> 设计模式之外观模式</h1>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E4%B8%80%E7%AE%80%E4%BB%8B">一、简介</a>
<ul>
<li><a href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%80%9D%E8%B7%AF">外观模式的思路</a></li>
<li><a href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%A6%81%E7%82%B9">外观模式的要点</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C%E5%AE%9E%E4%BE%8B">二、实例</a></li>
<li><a href="#%E4%B8%89%E5%9C%BA%E6%99%AF">三、场景</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
<!-- /TOC -->
<h2 id="一-简介"><a class="markdownIt-Anchor" href="#一-简介"></a> 一、简介</h2>
<p><strong>外观模式 (Facade)</strong> 为子系统中的<strong>一组接口</strong>提供一个一致的界面，此模式定义了<strong>一个高层接口</strong>，这个接口使得这一子系统更加容易使用。</p>
<p>外观模式是一种<strong>结构型模式</strong>。</p>
<p><img src="http://dunwu.test.upcdn.net/snap/20200725152554.png" alt="img" /></p>
<h3 id="外观模式的思路"><a class="markdownIt-Anchor" href="#外观模式的思路"></a> 外观模式的思路</h3>
<p><strong>Facade</strong> : 了解每个子系统类的功能，负责分发客户端的请求给各个子系统去处理。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Class1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">op1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"方法1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Class2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">op2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"方法2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Class3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">op3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"方法3"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Subsystem Classes</strong> : 实现子系统功能。在不感知 Facade 的情况下，处理 Facade 对象分配的工作，</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Class1 one = <span class="keyword">new</span> Class1();</span><br><span class="line">    <span class="keyword">private</span> Class2 two = <span class="keyword">new</span> Class2();</span><br><span class="line">    <span class="keyword">private</span> Class3 three = <span class="keyword">new</span> Class3();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">op1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Facade op1()"</span>);</span><br><span class="line">        one.op1();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">op2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Facade op2()"</span>);</span><br><span class="line">        two.op2();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">op3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Facade op3()"</span>);</span><br><span class="line">        three.op3();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Facade Method()"</span>);</span><br><span class="line">        three.op3();</span><br><span class="line">        two.op2();</span><br><span class="line">        one.op1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【客户端】</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FacadePattern</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Facade facade = <span class="keyword">new</span> Facade();</span><br><span class="line">        facade.Method();</span><br><span class="line"></span><br><span class="line">        facade.op1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【输出】</p>
<figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line">Facade <span class="function"><span class="keyword">Method</span><span class="params">()</span></span></span><br><span class="line"><span class="function">方法3</span></span><br><span class="line"><span class="function">方法2</span></span><br><span class="line"><span class="function">方法1</span></span><br><span class="line"><span class="function"><span class="title">Facade</span> <span class="title">op1</span><span class="params">()</span></span></span><br><span class="line"><span class="function">方法1</span></span><br></pre></td></tr></table></figure>
<h3 id="外观模式的要点"><a class="markdownIt-Anchor" href="#外观模式的要点"></a> 外观模式的要点</h3>
<ul>
<li>外观模式为复杂子系统提供了一个简单接口，并不为子系统添加新的功能和行为。</li>
<li>外观模式实现了子系统与客户之间的松耦合关系。</li>
<li>外观模式没有封装子系统的类，只是提供了简单的接口。 如果应用需要，它并不限制客户使用子系统类。因此可以再系统易用性与通用性之间选择。</li>
<li>外观模式注重的是简化接口，它更多的时候是从架构的层次去看整个系统，而并非单个类的层次。</li>
</ul>
<h2 id="二-实例"><a class="markdownIt-Anchor" href="#二-实例"></a> 二、实例</h2>
<h2 id="三-场景"><a class="markdownIt-Anchor" href="#三-场景"></a> 三、场景</h2>
<h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2>
<ul>
<li><a href="https://item.jd.com/10100236.html" target="_blank" rel="noopener">O’Reilly：Head First 设计模式</a></li>
<li><a href="https://item.jd.com/10079261.html" target="_blank" rel="noopener">大话设计模式</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/design/pattern/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/design/pattern/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式之代理模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-01-19 11:38:00" itemprop="dateCreated datePublished" datetime="2015-01-19T11:38:00+08:00">2015-01-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 15:46:26" itemprop="dateModified" datetime="2020-07-25T15:46:26+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/design/pattern/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="design/pattern/代理模式/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>836</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式之代理模式"><a class="markdownIt-Anchor" href="#设计模式之代理模式"></a> 设计模式之代理模式</h1>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E4%B8%80%E7%AE%80%E4%BB%8B">一、简介</a>
<ul>
<li><a href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%80%9D%E8%B7%AF">代理模式的思路</a></li>
<li><a href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%A6%81%E7%82%B9">代理模式的要点</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C%E5%AE%9E%E4%BE%8B">二、实例</a></li>
<li><a href="#%E4%B8%89%E5%9C%BA%E6%99%AF">三、场景</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
<!-- /TOC -->
<h2 id="一-简介"><a class="markdownIt-Anchor" href="#一-简介"></a> 一、简介</h2>
<p><strong>代理模式 (Proxy)</strong> 为其他对象提供一种<strong>代理</strong>以控制对这个对象的<strong>访问</strong>。</p>
<p>代理模式是一种<strong>结构型模式</strong>。</p>
<p><img src="http://dunwu.test.upcdn.net/snap/20200725153740.png" alt="img" /></p>
<h3 id="代理模式的思路"><a class="markdownIt-Anchor" href="#代理模式的思路"></a> 代理模式的思路</h3>
<p><strong>Subject</strong> : 定义了 RealSubject 和 Proxy 的公共接口，这样就在任何使用 RealSubject 的地方都可以使用 Proxy 。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Request</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>RealSubject</strong> : 定义 Proxy 所代表的真实实体。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span> <span class="keyword">extends</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Request</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"真实的请求"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Proxy</strong> : 保存一个引用使得代理可以访问实体，并提供一个与 Subject 的接口相同的接口，这样代理就可以用来替代实体。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> <span class="keyword">extends</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RealSubject real;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Request</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == real) &#123;</span><br><span class="line">            real = <span class="keyword">new</span> RealSubject();</span><br><span class="line">        &#125;</span><br><span class="line">        real.Request();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="代理模式的要点"><a class="markdownIt-Anchor" href="#代理模式的要点"></a> 代理模式的要点</h3>
<ul>
<li>代理模式介绍了一种访问对象的间接等级。</li>
<li>一个远程代理可以隐藏一个对象在不同地址空间的细节。</li>
<li>一个虚拟代理可以根据需要最优化创建对象的开销。</li>
<li>而安全代理和智能指引都允许访问对象的同时处理其他事务。</li>
</ul>
<h2 id="二-实例"><a class="markdownIt-Anchor" href="#二-实例"></a> 二、实例</h2>
<h2 id="三-场景"><a class="markdownIt-Anchor" href="#三-场景"></a> 三、场景</h2>
<ul>
<li><strong>远程代理</strong>：为一个远程对象在不同地址空间提供本地化代表。</li>
<li><strong>虚拟代理</strong>：根据需要创建开销很大的对象。通过它来存放实例化需要很长时间的真实对象。</li>
<li><strong>安全代理</strong>：用来控制真实对象的访问权限。</li>
<li><strong>智能指引</strong>：是指当调用真实对象时，代理处理另外一些事。</li>
</ul>
<h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2>
<ul>
<li><a href="https://item.jd.com/10100236.html" target="_blank" rel="noopener">O’Reilly：Head First 设计模式</a></li>
<li><a href="https://item.jd.com/10079261.html" target="_blank" rel="noopener">大话设计模式</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/design/pattern/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/design/pattern/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式之享元模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-01-19 09:48:00" itemprop="dateCreated datePublished" datetime="2015-01-19T09:48:00+08:00">2015-01-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 15:46:26" itemprop="dateModified" datetime="2020-07-25T15:46:26+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/design/pattern/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="design/pattern/享元模式/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式之享元模式"><a class="markdownIt-Anchor" href="#设计模式之享元模式"></a> 设计模式之享元模式</h1>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E4%B8%80%E7%AE%80%E4%BB%8B">一、简介</a>
<ul>
<li><a href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%80%9D%E8%B7%AF">享元模式的思路</a></li>
<li><a href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%A6%81%E7%82%B9">享元模式的要点</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C%E5%AE%9E%E4%BE%8B">二、实例</a></li>
<li><a href="#%E4%B8%89%E5%9C%BA%E6%99%AF">三、场景</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
<!-- /TOC -->
<h2 id="一-简介"><a class="markdownIt-Anchor" href="#一-简介"></a> 一、简介</h2>
<p><strong>享元模式 (Flyweight)</strong> 运用<strong>共享</strong>技术有效地支持大量细粒度的对象。</p>
<p>享元模式是一种<strong>结构型模式</strong>。</p>
<p><img src="http://dunwu.test.upcdn.net/snap/20200725153057.png" alt="img" /></p>
<h3 id="享元模式的思路"><a class="markdownIt-Anchor" href="#享元模式的思路"></a> 享元模式的思路</h3>
<p><strong>Flyweight</strong> : 它是所有具体享元类的超类或接口，通过这个接口，Flyweight 可以接受并作用于外部状态。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Flyweight</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Operation</span><span class="params">(<span class="keyword">int</span> extrinsicstates)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ConcreteFlyweight</strong> : 是继承 Flyweight 超类或实现 Flyweight 接口，并为内部状态增加存储空间。</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFlyweight</span> <span class="keyword">extends</span> <span class="title">Flyweight</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public void <span class="type">Operation</span>(int extrinsicstates) &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"共享的Flyweight : "</span> + extrinsicstates);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>UnsharedConcreteFlyweight</strong> : 指那些不需要共享的 Flyweight 子类，因为 Flyweight 接口共享成为可能，但它并不强制共享。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnsharedConcreteFlyweight</span> <span class="keyword">extends</span> <span class="title">Flyweight</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Operation</span><span class="params">(<span class="keyword">int</span> extrinsicstates)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"不共享的Flyweight : "</span> + extrinsicstates);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>FlywightFactory</strong> :是一个享元工厂，用来创建并管理 Flyweight 对象。它主要是用来确保合理地共享 Flyweight ，当用户请求一个 Flyweight 时， FlyweightFactory 对象提供一个已创建的实例或创建一个（如果对象不存在的话）。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlywightFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Hashtable&lt;String, Flyweight&gt; flyweights = <span class="keyword">new</span> Hashtable&lt;String, Flyweight&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FlywightFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        flyweights.put(<span class="string">"X"</span>, <span class="keyword">new</span> ConcreteFlyweight());</span><br><span class="line">        flyweights.put(<span class="string">"Y"</span>, <span class="keyword">new</span> ConcreteFlyweight());</span><br><span class="line">        flyweights.put(<span class="string">"Z"</span>, <span class="keyword">new</span> ConcreteFlyweight());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Flyweight <span class="title">GetFlyweight</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ((Flyweight)flyweights.get(key));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>客户端</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlyweightPattern</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> extrinsicstates = <span class="number">1</span>;</span><br><span class="line">        FlywightFactory factory = <span class="keyword">new</span> FlywightFactory();</span><br><span class="line"></span><br><span class="line">        Flyweight fx = factory.GetFlyweight(<span class="string">"X"</span>);</span><br><span class="line">        fx.Operation(extrinsicstates);</span><br><span class="line"></span><br><span class="line">        Flyweight fy = factory.GetFlyweight(<span class="string">"Y"</span>);</span><br><span class="line">        fy.Operation(++extrinsicstates);</span><br><span class="line"></span><br><span class="line">        Flyweight fz = factory.GetFlyweight(<span class="string">"Z"</span>);</span><br><span class="line">        fz.Operation(++extrinsicstates);</span><br><span class="line"></span><br><span class="line">        Flyweight uf = <span class="keyword">new</span> UnsharedConcreteFlyweight();</span><br><span class="line">        uf.Operation(++extrinsicstates);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">共享的Flyweight : 1</span><br><span class="line">共享的Flyweight : 2</span><br><span class="line">共享的Flyweight : 3</span><br><span class="line">不共享的Flyweight : 4</span><br></pre></td></tr></table></figure>
<h2 id="二-实例"><a class="markdownIt-Anchor" href="#二-实例"></a> 二、实例</h2>
<h2 id="三-场景"><a class="markdownIt-Anchor" href="#三-场景"></a> 三、场景</h2>
<h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2>
<ul>
<li><a href="https://item.jd.com/10100236.html" target="_blank" rel="noopener">O’Reilly：Head First 设计模式</a></li>
<li><a href="https://item.jd.com/10079261.html" target="_blank" rel="noopener">大话设计模式</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/design/pattern/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/design/pattern/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式之适配器模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-01-16 10:32:00" itemprop="dateCreated datePublished" datetime="2015-01-16T10:32:00+08:00">2015-01-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 15:46:26" itemprop="dateModified" datetime="2020-07-25T15:46:26+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/design/pattern/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="design/pattern/桥接模式/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式之适配器模式"><a class="markdownIt-Anchor" href="#设计模式之适配器模式"></a> 设计模式之适配器模式</h1>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E4%B8%80%E7%AE%80%E4%BB%8B">一、简介</a></li>
<li><a href="#%E4%BA%8C%E5%AE%9E%E4%BE%8B">二、实例</a></li>
<li><a href="#%E4%B8%89%E5%9C%BA%E6%99%AF">三、场景</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
<!-- /TOC -->
<h2 id="一-简介"><a class="markdownIt-Anchor" href="#一-简介"></a> 一、简介</h2>
<p><strong>桥接模式 (Bridge)</strong> 将<strong>抽象</strong>部分与<strong>实现</strong>部分<strong>分离</strong>，使它们都可以独立的变化。</p>
<p>桥接模式是一种<strong>结构式模式</strong>。</p>
<p>如果一个系统需要在构件的抽象化角色和具体化角色之间增加更多的灵活性，避免在两个层次之间建立静态的联系。抽象化角色和具体化角色都应该可以被子类扩展。在这种情况下，桥接模式可以灵活地组合不同的抽象化角色和具体化角色，并独立化地扩展。</p>
<p>设计要求实现化角色的任何改变不应当影响客户端，或者说实现化角色的改变对客户端是完全透明的。</p>
<p><img src="http://dunwu.test.upcdn.net/snap/20200725150616.png" alt="img" /></p>
<p>【Implementor】</p>
<p>定义<strong>实现接口</strong>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Implementor</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实现抽象部分需要的某些具体功能</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationImpl</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【Abstraction】</p>
<p>定义<strong>抽象接口</strong>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Abstraction</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 持有一个 Implementor 对象，形成聚合关系</span></span><br><span class="line">    <span class="keyword">protected</span> Implementor implementor;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Abstraction</span><span class="params">(Implementor implementor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.implementor = implementor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可能需要转调实现部分的具体实现</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        implementor.operationImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【ConcreteImplementor】</p>
<p>实现 <strong>Implementor</strong> 中定义的接口。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteImplementorA</span> <span class="keyword">implements</span> <span class="title">Implementor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationImpl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 真正的实现</span></span><br><span class="line">        System.out.println(<span class="string">"具体实现A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteImplementorB</span> <span class="keyword">implements</span> <span class="title">Implementor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationImpl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 真正的实现</span></span><br><span class="line">        System.out.println(<span class="string">"具体实现B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【RefinedAbstraction】</p>
<p>扩展 <strong>Abstraction</strong> 类。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RefinedAbstraction</span> <span class="keyword">extends</span> <span class="title">Abstraction</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RefinedAbstraction</span><span class="params">(Implementor implementor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(implementor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">otherOperation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 实现一定的功能，可能会使用具体实现部分的实现方法,</span></span><br><span class="line">        <span class="comment">// 但是本方法更大的可能是使用 Abstraction 中定义的方法，</span></span><br><span class="line">        <span class="comment">// 通过组合使用 Abstraction 中定义的方法来完成更多的功能。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【客户端】</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BridgePattern</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Implementor implementor = <span class="keyword">new</span> ConcreteImplementorA();</span><br><span class="line">        RefinedAbstraction abstraction = <span class="keyword">new</span> RefinedAbstraction(implementor);</span><br><span class="line">        abstraction.operation();</span><br><span class="line">        abstraction.otherOperation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【输出】</p>
<figure class="highlight dns"><table><tr><td class="code"><pre><span class="line">具体实现<span class="keyword">A</span></span><br><span class="line">其他操作</span><br></pre></td></tr></table></figure>
<h2 id="二-实例"><a class="markdownIt-Anchor" href="#二-实例"></a> 二、实例</h2>
<h2 id="三-场景"><a class="markdownIt-Anchor" href="#三-场景"></a> 三、场景</h2>
<ul>
<li>如果你不希望在抽象和实现部分采用固定的绑定关系，可以采用桥接模式，来把抽象和实现部分分开，然后在程序运行期间来动态的设置抽象部分需要用到的具体的实现，还可以动态切换具体的实现。</li>
<li>如果出现抽象部分和实现部分都应该可以扩展的情况，可以采用桥接模式，让抽象部分和实现部分可以独立的变化，从而可以灵活的进行单独扩展，而不是搅在一起，扩展一边会影响到另一边。</li>
<li>如果希望实现部分的修改，不会对客户产生影响，可以采用桥接模式，客户是面向抽象的接口在运行，实现部分的修改，可以独立于抽象部分，也就不会对客户产生影响了，也可以说对客户是透明的。</li>
<li>如果采用继承的实现方案，会导致产生很多子类，对于这种情况，可以考虑采用桥接模式，分析功能变化的原因，看看是否能分离成不同的纬度，然后通过桥接模式来分离它们，从而减少子类的数目。</li>
</ul>
<h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2>
<ul>
<li><a href="https://item.jd.com/10100236.html" target="_blank" rel="noopener">O’Reilly：Head First 设计模式</a></li>
<li><a href="https://item.jd.com/10079261.html" target="_blank" rel="noopener">大话设计模式</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/design/pattern/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/design/pattern/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式之装饰者模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-01-15 15:41:00" itemprop="dateCreated datePublished" datetime="2015-01-15T15:41:00+08:00">2015-01-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 15:46:26" itemprop="dateModified" datetime="2020-07-25T15:46:26+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/design/pattern/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="design/pattern/装饰者模式/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式之装饰者模式"><a class="markdownIt-Anchor" href="#设计模式之装饰者模式"></a> 设计模式之装饰者模式</h1>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E4%B8%80%E7%AE%80%E4%BB%8B">一、简介</a>
<ul>
<li><a href="#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%80%9D%E8%B7%AF">装饰模式的思路</a></li>
<li><a href="#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%A6%81%E7%82%B9">装饰模式的要点</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C%E5%AE%9E%E4%BE%8B">二、实例</a></li>
<li><a href="#%E4%B8%89%E5%9C%BA%E6%99%AF">三、场景</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
<!-- /TOC -->
<h2 id="一-简介"><a class="markdownIt-Anchor" href="#一-简介"></a> 一、简介</h2>
<p><strong>装饰者模式 (Decorator)</strong> <strong>动态</strong>地给一个对象<strong>添加</strong>一些<strong>额外的职责</strong>。就增加功能来说，Decorator 模式相比生成子类更为灵活。</p>
<p>装饰者模式是一种<strong>结构式模式</strong>。</p>
<p><img src="http://dunwu.test.upcdn.net/snap/20200725151247.png" alt="img" /></p>
<h3 id="装饰模式的思路"><a class="markdownIt-Anchor" href="#装饰模式的思路"></a> 装饰模式的思路</h3>
<p><strong>Component</strong> : 定义一个对象接口，可以给这些对象动态地添加职责。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ConcreteComponent</strong> : 实现 <strong>Component</strong> 定义的接口。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteComponent</span> <span class="keyword">implements</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"初始行为"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Decorator</strong> : 装饰抽象类，继承了 Component， 从外类来扩展 Component 类的功能，但对于 Component 来说，是无需知道 Decorator 的存在的。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">implements</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 持有一个 Component 对象，和 Component 形成聚合关系</span></span><br><span class="line">    <span class="keyword">protected</span> Component component;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传入要进一步修饰的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Decorator</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.component = component;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">// 调用要修饰对象的原方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        component.operation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ConcreteDecorator</strong> : 具体的装饰对象，起到给 Component 添加职责的功能。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorA</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String addedState = <span class="string">"新属性1"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreteDecoratorA</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.operation();</span><br><span class="line">        System.out.println(<span class="string">"添加属性: "</span> + addedState);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorB</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreteDecoratorB</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.operation();</span><br><span class="line">        AddedBehavior();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AddedBehavior</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"添加行为"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【客户端】</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecoratorPattern</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Component component = <span class="keyword">new</span> ConcreteComponent();</span><br><span class="line">        component.operation();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"======================================"</span>);</span><br><span class="line">        Decorator decoratorA = <span class="keyword">new</span> ConcreteDecoratorA(component);</span><br><span class="line">        decoratorA.operation();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"======================================"</span>);</span><br><span class="line">        Decorator decoratorB = <span class="keyword">new</span> ConcreteDecoratorB(decoratorA);</span><br><span class="line">        decoratorB.operation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【输出】</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">初始行为</span><br><span class="line">======================================</span><br><span class="line">初始行为</span><br><span class="line">添加属性: 新属性1</span><br><span class="line">======================================</span><br><span class="line">初始行为</span><br><span class="line">添加属性: 新属性1</span><br><span class="line">添加行为</span><br></pre></td></tr></table></figure>
<h3 id="装饰模式的要点"><a class="markdownIt-Anchor" href="#装饰模式的要点"></a> 装饰模式的要点</h3>
<ul>
<li>装饰对象和真实对象有相同的接口。这样客户端对象就能以和真实对象相同的方式和装饰对象交互。</li>
<li>装饰对象包含一个真实对象的引用（reference）。</li>
<li>装饰对象接受所有来自客户端的请求。它把这些请求转发给真实的对象。</li>
<li>装饰对象可以在转发这些请求以前或以后增加一些附加功能。这样就确保了在运行时，不用修改给定对象的结构就可以在外部增加附加的功能。在面向对象的设计中，通常是通过继承来实现对给定类的功能扩展。</li>
</ul>
<h2 id="二-实例"><a class="markdownIt-Anchor" href="#二-实例"></a> 二、实例</h2>
<h2 id="三-场景"><a class="markdownIt-Anchor" href="#三-场景"></a> 三、场景</h2>
<ul>
<li>需要动态的、透明的为一个对象添加职责，即不影响其他对象。</li>
<li>需要动态的给一个对象添加功能，这些功能可以再动态的撤销。</li>
<li>需要增加由一些基本功能的排列组合而产生的非常大量的功能，从而使继承关系变的不现实。</li>
<li>当不能采用生成子类的方法进行扩充时。一种情况是，可能有大量独立的扩展，为支持每一种组合将产生大量的子类，使得子类数目呈爆炸性增长。另一种情况可能是因为类定义被隐藏，或类定义不能用于生成子类。</li>
</ul>
<h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2>
<ul>
<li><a href="https://item.jd.com/10100236.html" target="_blank" rel="noopener">O’Reilly：Head First 设计模式</a></li>
<li><a href="https://item.jd.com/10079261.html" target="_blank" rel="noopener">大话设计模式</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/design/pattern/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/design/pattern/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式之适配器模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-01-14 18:31:00" itemprop="dateCreated datePublished" datetime="2015-01-14T18:31:00+08:00">2015-01-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 15:46:26" itemprop="dateModified" datetime="2020-07-25T15:46:26+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/design/pattern/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="design/pattern/适配器模式/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>754</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式之适配器模式"><a class="markdownIt-Anchor" href="#设计模式之适配器模式"></a> 设计模式之适配器模式</h1>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E4%B8%80%E7%AE%80%E4%BB%8B">一、简介</a></li>
<li><a href="#%E4%BA%8C%E5%AE%9E%E4%BE%8B">二、实例</a></li>
<li><a href="#%E4%B8%89%E5%9C%BA%E6%99%AF">三、场景</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
<!-- /TOC -->
<h2 id="一-简介"><a class="markdownIt-Anchor" href="#一-简介"></a> 一、简介</h2>
<p><strong>适配器模式 (Adapter)</strong> 将一个类的接口<strong>转换</strong>成客户希望的另外一个接口。</p>
<p>适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</p>
<p>适配器模式是一种<strong>结构型模式</strong>。</p>
<p><img src="http://dunwu.test.upcdn.net/snap/20200725150134.png" alt="img" /></p>
<p>【Target】</p>
<p>定义用户实际<strong>需要的接口</strong>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Target</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Request</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【Adaptee】</p>
<p>定义一个需要<strong>适配的接口</strong>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adaptee</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SpecificRequest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"特殊请求"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【Adapter】</p>
<p>通过在内部<strong>包装一个</strong> <strong>Adaptee 对象</strong>，把源接口转换成目标接口。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adapter</span> <span class="keyword">extends</span> <span class="title">Target</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Adaptee adaptee = <span class="keyword">new</span> Adaptee();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Request</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        adaptee.SpecificRequest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【客户端】</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdapterPattern</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        Target target = <span class="keyword">new</span> Adapter();</span><br><span class="line">        target.Request();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【输出】</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">特殊请求</span><br></pre></td></tr></table></figure>
<h2 id="二-实例"><a class="markdownIt-Anchor" href="#二-实例"></a> 二、实例</h2>
<h2 id="三-场景"><a class="markdownIt-Anchor" href="#三-场景"></a> 三、场景</h2>
<p>想要使用一个已经存在的类，但如果它的方法不满足需求时；</p>
<p>两个类的职责相同或相似，但是具有不同的接口时要使用它；</p>
<p>应该在双方都不太容易修改的时候再使用适配器模式适配，而不是一有不同时就使用它。</p>
<h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2>
<ul>
<li><a href="https://item.jd.com/10100236.html" target="_blank" rel="noopener">O’Reilly：Head First 设计模式</a></li>
<li><a href="https://item.jd.com/10079261.html" target="_blank" rel="noopener">大话设计模式</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/design/pattern/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/design/pattern/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式之组合模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-01-14 15:33:00" itemprop="dateCreated datePublished" datetime="2015-01-14T15:33:00+08:00">2015-01-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 15:46:26" itemprop="dateModified" datetime="2020-07-25T15:46:26+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/design/pattern/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="design/pattern/组合模式/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式之组合模式"><a class="markdownIt-Anchor" href="#设计模式之组合模式"></a> 设计模式之组合模式</h1>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E4%B8%80%E7%AE%80%E4%BB%8B">一、简介</a>
<ul>
<li><a href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%80%9D%E8%B7%AF">组合模式的思路</a></li>
<li><a href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%A6%81%E7%82%B9">组合模式的要点</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C%E5%AE%9E%E4%BE%8B">二、实例</a></li>
<li><a href="#%E4%B8%89%E5%9C%BA%E6%99%AF">三、场景</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
<!-- /TOC -->
<h2 id="一-简介"><a class="markdownIt-Anchor" href="#一-简介"></a> 一、简介</h2>
<p><strong>组合模式 (Component)</strong> 将对象组合成<strong>树形结构</strong>以表示“部分-整体”的层次结构。</p>
<p>组合模式使得用户对单个对象和组合对象的使用具有<strong>唯一性</strong>。</p>
<p>组合模式是一种<strong>结构型模式</strong>。</p>
<p><img src="http://dunwu.test.upcdn.net/snap/20200725151927.png" alt="img" /></p>
<h3 id="组合模式的思路"><a class="markdownIt-Anchor" href="#组合模式的思路"></a> 组合模式的思路</h3>
<p><strong>Component</strong> : 组合中的对象声明接口，在适当的情况下，实现所有类共有接口的默认行为。声明一个接口用于访问和管理 Component 的子部件。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Component</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Add</span><span class="params">(Component c)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Remove</span><span class="params">(Component c)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Display</span><span class="params">(<span class="keyword">int</span> depth)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Leaf</strong> : 表示叶节点对象。叶子节点没有子节点。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Leaf</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Leaf</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Add</span><span class="params">(Component c)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Can not add to a leaf"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Remove</span><span class="params">(Component c)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Can not remove from a leaf"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Display</span><span class="params">(<span class="keyword">int</span> depth)</span> </span>&#123;</span><br><span class="line">        String temp = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; depth; i++)</span><br><span class="line">            temp += <span class="string">'-'</span>;</span><br><span class="line">        System.out.println(temp + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Composite</strong> : 定义枝节点行为，用来存储子部件，在 Component 接口中实现与子部件相关的操作。例如 Add 和 Remove。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Composite</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Component&gt; children = <span class="keyword">new</span> ArrayList&lt;Component&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Composite</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Add</span><span class="params">(Component c)</span> </span>&#123;</span><br><span class="line">        children.add(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Remove</span><span class="params">(Component c)</span> </span>&#123;</span><br><span class="line">        children.remove(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Display</span><span class="params">(<span class="keyword">int</span> depth)</span> </span>&#123;</span><br><span class="line">        String temp = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; depth; i++)</span><br><span class="line">            temp += <span class="string">'-'</span>;</span><br><span class="line">        System.out.println(temp + name);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Component c : children) &#123;</span><br><span class="line">            c.Display(depth + <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Client</strong> : 通过 Component 接口操作结构中的对象。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompositePattern</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Composite root = <span class="keyword">new</span> Composite(<span class="string">"root"</span>);</span><br><span class="line">        root.Add(<span class="keyword">new</span> Leaf(<span class="string">"Leaf A"</span>));</span><br><span class="line">        root.Add(<span class="keyword">new</span> Leaf(<span class="string">"Leaf B"</span>));</span><br><span class="line"></span><br><span class="line">        Composite compX = <span class="keyword">new</span> Composite(<span class="string">"Composite X"</span>);</span><br><span class="line">        compX.Add(<span class="keyword">new</span> Leaf(<span class="string">"Leaf XA"</span>));</span><br><span class="line">        compX.Add(<span class="keyword">new</span> Leaf(<span class="string">"Leaf XB"</span>));</span><br><span class="line">        root.Add(compX);</span><br><span class="line"></span><br><span class="line">        Composite compXY = <span class="keyword">new</span> Composite(<span class="string">"Composite XY"</span>);</span><br><span class="line">        compXY.Add(<span class="keyword">new</span> Leaf(<span class="string">"Leaf XYA"</span>));</span><br><span class="line">        compXY.Add(<span class="keyword">new</span> Leaf(<span class="string">"Leaf XYB"</span>));</span><br><span class="line">        compX.Add(compXY);</span><br><span class="line"></span><br><span class="line">        root.Display(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="组合模式的要点"><a class="markdownIt-Anchor" href="#组合模式的要点"></a> 组合模式的要点</h3>
<p>组合模式定义由 Leaf 对象和 Composite 对象组成的类结构；</p>
<p>它使得客户端变得简单；</p>
<p>它使得添加或删除子部件变得很容易。</p>
<h2 id="二-实例"><a class="markdownIt-Anchor" href="#二-实例"></a> 二、实例</h2>
<h2 id="三-场景"><a class="markdownIt-Anchor" href="#三-场景"></a> 三、场景</h2>
<p>组合模式的适用场景：</p>
<ul>
<li>想要表示对象的部分-整体层次结构。</li>
<li>想要客户端忽略组合对象与单个对象的差异，客户端将统一地使用组合结构中的所有对象。</li>
</ul>
<p>关于分级数据结构的一个普遍性的例子是你每次使用电脑时所遇到的:<strong>文件系统</strong>。</p>
<p>文件系统由目录和文件组成。每个目录都可以装内容。目录的内容可以是文件，也 可以是目录。</p>
<p>按照这种方式，计算机的文件系统就是以递归结构来组织的。如果你想要描述这样的数据结构，那么你可以使用组合模式。</p>
<h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2>
<ul>
<li><a href="https://item.jd.com/10100236.html" target="_blank" rel="noopener">O’Reilly：Head First 设计模式</a></li>
<li><a href="https://item.jd.com/10079261.html" target="_blank" rel="noopener">大话设计模式</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/network/icmp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/network/icmp/" class="post-title-link" itemprop="url">网络协议之 ICMP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-07-02 20:54:00" itemprop="dateCreated datePublished" datetime="2014-07-02T20:54:00+08:00">2014-07-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 15:46:26" itemprop="dateModified" datetime="2020-07-25T15:46:26+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">网络</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/network/icmp/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="network/icmp/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="网络协议之-icmp"><a class="markdownIt-Anchor" href="#网络协议之-icmp"></a> 网络协议之 ICMP</h1>
<blockquote>
<p>📦 本文已归档到：「<a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">blog</a>」</p>
</blockquote>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#icmp-%E7%AE%80%E4%BB%8B">ICMP 简介</a></li>
<li><a href="#icmp-%E7%B1%BB%E5%9E%8B">ICMP 类型</a></li>
<li><a href="#%E7%9B%AE%E7%9A%84%E4%B8%8D%E5%8F%AF%E8%BE%BEdestination-unreachable-message">目的不可达(Destination Unreachable Message)</a></li>
<li><a href="#%E8%B6%85%E6%97%B6time-exceeded-message">超时(Time Exceeded Message)</a></li>
<li><a href="#%E5%8F%82%E6%95%B0%E9%94%99%E8%AF%AF%E6%8A%A5%E6%96%87parameter-problem-message">参数错误报文(Parameter Problem Message)</a></li>
<li><a href="#%E6%BA%90%E5%86%B7%E5%8D%B4source-quench-message">源冷却(Source Quench Message)</a></li>
<li><a href="#%E9%87%8D%E5%AE%9A%E5%90%91redirect-message">重定向(Redirect Message)</a></li>
<li><a href="#%E8%AF%B7%E6%B1%82%E5%9B%9E%E6%98%BE%E6%88%96%E5%9B%9E%E6%98%BE%E5%BA%94%E7%AD%94echo-or-echo-reply-message">请求回显或回显应答(Echo or Echo Reply Message)</a></li>
<li><a href="#%E6%97%B6%E9%97%B4%E6%88%B3%E6%88%96%E6%97%B6%E9%97%B4%E6%88%B3%E8%AF%B7%E6%B1%82timestamp-or-timestamp-reply-message">时间戳或时间戳请求(Timestamp or Timestamp Reply Message)</a></li>
<li><a href="#%E4%BF%A1%E6%81%AF%E8%AF%B7%E6%B1%82%E6%88%96%E4%BF%A1%E6%81%AF%E5%93%8D%E5%BA%94">信息请求或信息响应</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">总结</a></li>
<li><a href="#%E5%8F%82%E8%80%83">参考</a></li>
</ul>
<!-- /TOC -->
<h2 id="icmp-简介"><a class="markdownIt-Anchor" href="#icmp-简介"></a> ICMP 简介</h2>
<p>ICMP 全名为(INTERNET CONTROL MESSAGE PROTOCOL)网络控制消息协议。</p>
<p>ICMP 的协议号为<strong>1</strong>。</p>
<p>ICMP 报文就像是 IP 报文的小弟，总顶着 IP 报文的名头出来混。因为 ICMP 报文是在 IP 报文内部的，如图：</p>
<div align="center"><img src="https://images2015.cnblogs.com/blog/318837/201606/318837-20160617091834260-1410966672.png"/></div>
<h2 id="icmp-类型"><a class="markdownIt-Anchor" href="#icmp-类型"></a> ICMP 类型</h2>
<p>ICMP 报文主要有两大功能：查询报文和差错报文。</p>
<h2 id="目的不可达destination-unreachable-message"><a class="markdownIt-Anchor" href="#目的不可达destination-unreachable-message"></a> 目的不可达(Destination Unreachable Message)</h2>
<p>0 1 2 3</p>
<p>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Type | Code | Checksum |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| unused |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Internet Header + 64 bits of Original Data Datagram |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>日常生活中，邮寄包裹会经过多个传递环节，任意一环如果无法传下去，都会返回寄件人，并附上无法邮寄的原因。同理，当路由器收到一个无法传递下去的 IP 报文时，会发送 ICMP<strong>目的不可达报文</strong>（Type 为 3）给 IP 报文的源发送方。报文中的 Code 就表示发送失败的原因。</p>
<p>Code</p>
<p>0 = net unreachable;</p>
<p>1 = host unreachable;</p>
<p>2 = protocol unreachable;</p>
<p>3 = port unreachable;</p>
<p>4 = fragmentation needed and DF set;</p>
<p>5 = source route failed.</p>
<h2 id="超时time-exceeded-message"><a class="markdownIt-Anchor" href="#超时time-exceeded-message"></a> 超时(Time Exceeded Message)</h2>
<p>0 1 2 3</p>
<p>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Type | Code | Checksum |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| unused |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Internet Header + 64 bits of Original Data Datagram |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>网络传输 IP 数据报的过程中，如果 IP 数据包的 TTL 值逐渐递减为 0 时，需要丢弃数据报。这时，路由器需要向源发送方发送 <strong>ICMP 超时报文</strong>(Type 为 11)，Code 为 0，表示传输过程中超时了。</p>
<p>一个 IP 数据报可能会因为过大而被分片，然后在目的主机侧把所有的分片重组。如果主机迟迟没有等到所有的分片报文，就会向源发送方发送一个 ICMP 超时报文，Code 为 1，表示分片重组超时了。</p>
<h2 id="参数错误报文parameter-problem-message"><a class="markdownIt-Anchor" href="#参数错误报文parameter-problem-message"></a> 参数错误报文(Parameter Problem Message)</h2>
<p>0 1 2 3</p>
<p>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Type | Code | Checksum |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Pointer | unused |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Internet Header + 64 bits of Original Data Datagram |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>当路由器或主机处理数据报时，发现因为报文头的参数错误而不得不丢弃报文时，需要向源发送方发送<strong>参数错误报文</strong>(Type 为 12)。当 Code 为 0 时，报文中的 Pointer 表示错误的字节位置。</p>
<h2 id="源冷却source-quench-message"><a class="markdownIt-Anchor" href="#源冷却source-quench-message"></a> 源冷却(Source Quench Message)</h2>
<p>0 1 2 3</p>
<p>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Type | Code | Checksum |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| unused |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Internet Header + 64 bits of Original Data Datagram |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>路由器在处理报文时会有一个缓存队列。如果超过最大缓存队列，将无法处理，从而丢弃报文。并向源发送方发一个 <strong>ICMP 源冷却报文</strong>(Type 为 4)，告诉对方：“嘿，我这里客满了，你迟点再来。”</p>
<h2 id="重定向redirect-message"><a class="markdownIt-Anchor" href="#重定向redirect-message"></a> 重定向(Redirect Message)</h2>
<p>0 1 2 3</p>
<p>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Type | Code | Checksum |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Gateway Internet Address |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Internet Header + 64 bits of Original Data Datagram |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>想像一下，在公司中，有人来你的项目组问你某某某在哪儿。你一想，我们组没有这人啊。你肯定就会说，我们组没有这号人，你去其他组看看。当路由收到 IP 数据报，发现数据报的目的地址在路由表上没有，它就会发 <strong>ICMP 重定向报文</strong>(Type 为 5)给源发送方，提醒它想要发送的地址不在，去其他地方找找吧。</p>
<h2 id="请求回显或回显应答echo-or-echo-reply-message"><a class="markdownIt-Anchor" href="#请求回显或回显应答echo-or-echo-reply-message"></a> 请求回显或回显应答(Echo or Echo Reply Message)</h2>
<p>0 1 2 3</p>
<p>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Type | Code | Checksum |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Identifier | Sequence Number |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Data …</p>
<p>±±±±±</p>
<p><strong>Type(8)<strong>是</strong>请求回显报文(Echo)</strong>；Type(0)是<strong>回显应答报文(Echo Reply)</strong>。</p>
<p>请求回显或回显应答报文属于查询报文。Ping 就是用这种报文进行查询和回应。</p>
<h2 id="时间戳或时间戳请求timestamp-or-timestamp-reply-message"><a class="markdownIt-Anchor" href="#时间戳或时间戳请求timestamp-or-timestamp-reply-message"></a> 时间戳或时间戳请求(Timestamp or Timestamp Reply Message)</h2>
<p>0 1 2 3</p>
<p>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Type | Code | Checksum |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Identifier | Sequence Number |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Originate Timestamp |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Receive Timestamp |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Transmit Timestamp |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>时间戳报文是用来记录收发以及传输时间的报文。Originate Timestamp 记录的是发送方发送报文的时刻；<strong>Receive Timestamp</strong>记录的是接收方收到报文的时刻；<strong>Transmit Timestamp</strong>表示回显这最后发送报文的时刻。</p>
<h2 id="信息请求或信息响应"><a class="markdownIt-Anchor" href="#信息请求或信息响应"></a> 信息请求或信息响应</h2>
<p>0 1 2 3</p>
<p>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Type | Code | Checksum |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>| Identifier | Sequence Number |</p>
<p>±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±+</p>
<p>这种报文是用来找出一个主机所在的网络个数（一个主机可能会在多个网络中）。报文的 IP 消息头的目的地址会填为全 0，表示 this，源地址会填为源 IP 所在的网络 IP。</p>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<p><strong>图：ICMP 知识点思维导图</strong></p>
<div align="center"><img src="https://images2015.cnblogs.com/blog/318837/201606/318837-20160617091835838-1982473379.png"/></div>
<h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2>
<ul>
<li><a href="http://www.rfc-editor.org/info/rfc792" target="_blank" rel="noopener">RFC792</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/page/7/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/7/">7</a><span class="page-number current">8</span>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="Zhang Peng"
    src="/blog/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Zhang Peng</p>
  <div class="site-description" itemprop="description">Dunwu's Blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">79</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/dunwu" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;dunwu" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:forbreak@163.com" title="E-Mail &amp;rarr; mailto:forbreak@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/blog/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-paper-plane"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Peng</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">444k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">6:43</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>

<script src="/blog/js/bookmark.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>














  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://blog-ajay4qmfci.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
